<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <title>블로그 | AgeCalc</title>
    <meta name="description" content="AgeCalc 블로그에서 최신 글을 확인하세요." />
    <link rel="canonical" href="https://agecalc.cloud/blog" />

    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="AgeCalc" />
    <meta property="og:title" content="블로그 | AgeCalc" />
    <meta property="og:description" content="AgeCalc 블로그 글 목록" />
    <meta property="og:url" content="https://agecalc.cloud/blog" />
    <meta property="og:image" content="{{ url_for('static', filename='images/og-image.png', _external=True) }}" />

    <link rel="icon" href="/favicon.ico">
    <link rel="icon" href="{{ url_for('static', filename='images/favicon-32x32.png') }}" sizes="32x32" />
    <link rel="icon" href="{{ url_for('static', filename='images/favicon-16x16.png') }}" sizes="16x16" />
    <link rel="apple-touch-icon" sizes="180x180"
        href="{{ url_for('static', filename='images/apple-touch-icon.png') }}" />
    <link rel="manifest" href="{{ url_for('static', filename='images/site.webmanifest') }}" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M0RLS343N4"></script>
    <script src="{{ url_for('static', filename='js/analytics.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/clarity-init.js') }}" defer></script>
    {% include 'partials/adsense.html' %}
</head>

<body>
    <div id="pixel-background"></div>
    <div class="container">
        {% include 'partials/header.html' %}
        <h1>블로그</h1>
        <div style="text-align: center;margin-bottom: 2rem;">최신 글 {{ total }}개</div>

        {% if posts %}
        <section class="blog-grid">
            {% for post in posts %}
            <article class="blog-card">
                <a class="blog-card-link" href="{{ url_for('blog_detail', slug=post.slug) }}">
                    {% if post.cover_image_url %}
                    <img class="blog-thumb" src="{{ post.cover_image_url }}" alt="{{ post.title }}">
                    {% endif %}
                    <h3>{{ post.title }}</h3>
                    <p class="blog-date">
                        {% if post.published_at %}
                        {{ post.published_at.strftime('%Y-%m-%d') }}
                        {% endif %}
                    </p>
                    <p class="blog-excerpt">{{ post.excerpt or '' }}</p>
                </a>
            </article>
            {% endfor %}
        </section>

        <nav class="pagination" aria-label="블로그 페이지 이동">
            {% if page > 1 %}
            <a class="page-btn" href="{{ url_for('blog_list', page=page-1) }}">이전</a>
            {% endif %}
            <span class="page-current">{{ page }} / {{ total_pages }}</span>
            {% if page < total_pages %}
            <a class="page-btn" href="{{ url_for('blog_list', page=page+1) }}">다음</a>
            {% endif %}
        </nav>
        {% else %}
        <div class="result error">
            <p class="message">아직 게시된 글이 없습니다.</p>
        </div>
        {% endif %}

        {% include 'partials/footer.html' %}
    </div>

    <div class="cookie-banner" id="cookie-banner">
        <div class="cookie-content">
            <p>이 웹사이트는 쿠키를 사용하여 사용자 경험을 개선합니다. 계속 사용하시면 쿠키 사용에 동의하는 것으로 간주됩니다.</p>
            <div class="cookie-buttons">
                <button id="accept-cookies" class="btn btn-primary">동의</button>
                <button id="reject-cookies" class="btn btn-secondary">거부</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/cookie-consent.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/scroll-top.js') }}" defer></script>
    <button id="scroll-top" class="scroll-top-btn" title="맨 위로">↑</button>
    <script src="{{ url_for('static', filename='js/pixel-stickers.js') }}" defer></script>
</body>

</html>
